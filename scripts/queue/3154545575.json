{"url":"https://api.github.com/repos/vercel/next.js/issues/80627","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/80627/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/80627/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/80627/events","html_url":"https://github.com/vercel/next.js/issues/80627","id":3154545575,"node_id":"I_kwDOBC3Cis68Boun","number":80627,"title":"Unexpected Behavior with revalidateTag in Next.js Server Actions","user":{"login":"mehmetext","id":44941107,"node_id":"MDQ6VXNlcjQ0OTQxMTA3","avatar_url":"https://avatars.githubusercontent.com/u/44941107?v=4","gravatar_id":"","url":"https://api.github.com/users/mehmetext","html_url":"https://github.com/mehmetext","followers_url":"https://api.github.com/users/mehmetext/followers","following_url":"https://api.github.com/users/mehmetext/following{/other_user}","gists_url":"https://api.github.com/users/mehmetext/gists{/gist_id}","starred_url":"https://api.github.com/users/mehmetext/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mehmetext/subscriptions","organizations_url":"https://api.github.com/users/mehmetext/orgs","repos_url":"https://api.github.com/users/mehmetext/repos","events_url":"https://api.github.com/users/mehmetext/events{/privacy}","received_events_url":"https://api.github.com/users/mehmetext/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":8064249485,"node_id":"LA_kwDOBC3Cis8AAAAB4KqujQ","url":"https://api.github.com/repos/vercel/next.js/labels/Server%20Actions","name":"Server Actions","color":"EF04D1","default":false,"description":"Related to Server Actions."}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2025-06-17T19:27:26Z","updated_at":"2025-06-20T06:56:37Z","closed_at":null,"author_association":"NONE","type":{"id":1930995,"node_id":"IT_kwDOAOSnPM4AHXbz","name":"Bug","description":"An unexpected problem or behavior","color":"red","created_at":"2024-01-25T15:36:35Z","updated_at":"2024-07-26T10:33:22Z","is_enabled":true},"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"body":"### Link to the code that reproduces this issue\n\nhttps://github.com/mehmetext/nextjs-cache\n\n### To Reproduce\n\n1. Create a Next.js application with multiple pages (home, about)\n2. Implement server actions with different tags (health, todos, about)\n3. Use revalidateTag(\"health\") in a server action\n4. Navigate between pages and observe the network requests\n\nOr please clone my project and test it.\n\n### Current vs. Expected behavior\n\n### Current Behavior\nWhen calling `revalidateTag(\"health\")`:\n- On the home page: Revalidates both \"todos\" and \"health\" tags\n- On the about page: Revalidates \"todos\", \"health\", and \"about\" tags\n\nThis means that even though we only want to refresh the health data, the system is revalidating all tags present on the current page.\n\n### Expected Behavior\nWhen calling `revalidateTag(\"health\")`:\n- Should only revalidate the \"health\" tag\n- Should only fetch health data from the backend\n- Should not affect other tags (todos, about) even if they are present on the same page\n\n### Provide environment information\n\n```bash\nOperating System:\n  Platform: darwin\n  Arch: arm64\n  Version: Darwin Kernel Version 24.5.0: Tue Apr 22 19:54:26 PDT 2025; root:xnu-11417.121.6~2/RELEASE_ARM64_T8112\n  Available memory (MB): 16384\n  Available CPU cores: 8\nBinaries:\n  Node: 22.13.1\n  npm: 10.9.2\n  Yarn: 1.22.22\n  pnpm: 9.10.0\nRelevant Packages:\n  next: 15.3.3 // Latest available version is detected (15.3.3).\n  eslint-config-next: 15.3.3\n  react: 19.1.0\n  react-dom: 19.1.0\n  typescript: 5.8.3\nNext.js Config:\n  output: N/A\n```\n\n### Which area(s) are affected? (Select all that apply)\n\nServer Actions, Use Cache\n\n### Which stage(s) are affected? (Select all that apply)\n\nnext dev (local), next start (local)\n\n### Additional context\n\nThe issue appears to be related to how `revalidateTag` interacts with page-level data fetching. The current implementation seems to revalidate all tags present on the current page, rather than just the specified tag. This behavior is particularly noticeable in applications with multiple data dependencies across different pages.\n\nThe question is: Does `revalidateTag` revalidate all tags present on the current page, or should it only revalidate the specified tag? This behavior might be causing unnecessary data refetching and potentially impacting performance.","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/80627/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/80627/timeline","performed_via_github_app":null,"state_reason":null,"score":1.0}
