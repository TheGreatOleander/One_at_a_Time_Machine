{"url":"https://api.github.com/repos/vercel/next.js/issues/81050","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/81050/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/81050/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/81050/events","html_url":"https://github.com/vercel/next.js/issues/81050","id":3187051620,"node_id":"I_kwDOBC3Cis699oxk","number":81050,"title":"Instrumentation hook is not called in standalone output","user":{"login":"AOEChamp","id":5560163,"node_id":"MDQ6VXNlcjU1NjAxNjM=","avatar_url":"https://avatars.githubusercontent.com/u/5560163?v=4","gravatar_id":"","url":"https://api.github.com/users/AOEChamp","html_url":"https://github.com/AOEChamp","followers_url":"https://api.github.com/users/AOEChamp/followers","following_url":"https://api.github.com/users/AOEChamp/following{/other_user}","gists_url":"https://api.github.com/users/AOEChamp/gists{/gist_id}","starred_url":"https://api.github.com/users/AOEChamp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AOEChamp/subscriptions","organizations_url":"https://api.github.com/users/AOEChamp/orgs","repos_url":"https://api.github.com/users/AOEChamp/repos","events_url":"https://api.github.com/users/AOEChamp/events{/privacy}","received_events_url":"https://api.github.com/users/AOEChamp/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":{"login":"icyJoseph","id":21013447,"node_id":"MDQ6VXNlcjIxMDEzNDQ3","avatar_url":"https://avatars.githubusercontent.com/u/21013447?v=4","gravatar_id":"","url":"https://api.github.com/users/icyJoseph","html_url":"https://github.com/icyJoseph","followers_url":"https://api.github.com/users/icyJoseph/followers","following_url":"https://api.github.com/users/icyJoseph/following{/other_user}","gists_url":"https://api.github.com/users/icyJoseph/gists{/gist_id}","starred_url":"https://api.github.com/users/icyJoseph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icyJoseph/subscriptions","organizations_url":"https://api.github.com/users/icyJoseph/orgs","repos_url":"https://api.github.com/users/icyJoseph/repos","events_url":"https://api.github.com/users/icyJoseph/events{/privacy}","received_events_url":"https://api.github.com/users/icyJoseph/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"icyJoseph","id":21013447,"node_id":"MDQ6VXNlcjIxMDEzNDQ3","avatar_url":"https://avatars.githubusercontent.com/u/21013447?v=4","gravatar_id":"","url":"https://api.github.com/users/icyJoseph","html_url":"https://github.com/icyJoseph","followers_url":"https://api.github.com/users/icyJoseph/followers","following_url":"https://api.github.com/users/icyJoseph/following{/other_user}","gists_url":"https://api.github.com/users/icyJoseph/gists{/gist_id}","starred_url":"https://api.github.com/users/icyJoseph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icyJoseph/subscriptions","organizations_url":"https://api.github.com/users/icyJoseph/orgs","repos_url":"https://api.github.com/users/icyJoseph/repos","events_url":"https://api.github.com/users/icyJoseph/events{/privacy}","received_events_url":"https://api.github.com/users/icyJoseph/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":4,"created_at":"2025-06-30T04:01:36Z","updated_at":"2025-07-02T16:38:31Z","closed_at":null,"author_association":"NONE","type":{"id":1930995,"node_id":"IT_kwDOAOSnPM4AHXbz","name":"Bug","description":"An unexpected problem or behavior","color":"red","created_at":"2024-01-25T15:36:35Z","updated_at":"2024-07-26T10:33:22Z","is_enabled":true},"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"body":"### Link to the code that reproduces this issue\n\nhttps://github.com/AOEChamp/nextjs-standalone-instrumentation-bug\n\n### To Reproduce\n\n```\nnpm run build\nnode .next/standalone/server.js\n```\n\n### Current vs. Expected behavior\n\nStandalone build run will pickup the instrumentation.ts from the src directory and print \"instrumentation SRC.\" If the instrumentation.ts is not in the src directory, it will not run. `npm run dev` works correctly with the root instrumentation. This is confusing and not clearly explained in the docs: [https://nextjs.org/docs/app/guides/instrumentation](https://nextjs.org/docs/app/guides/instrumentation)\n\n### Provide environment information\n\n```bash\nOperating System:\n  Platform: darwin\n  Arch: arm64\n  Version: Darwin Kernel Version 23.6.0: Thu Mar  6 21:58:56 PST 2025; root:xnu-10063.141.1.704.6~1/RELEASE_ARM64_T6020\n  Available memory (MB): 65536\n  Available CPU cores: 12\nBinaries:\n  Node: 22.14.0\n  npm: 10.9.2\n  Yarn: N/A\n  pnpm: N/A\nRelevant Packages:\n  next: 15.3.4 // Latest available version is detected (15.3.4).\n  eslint-config-next: 15.3.4\n  react: 19.1.0\n  react-dom: 19.1.0\n  typescript: 5.8.3\nNext.js Config:\n  output: standalone\n```\n\n### Which area(s) are affected? (Select all that apply)\n\nNot sure\n\n### Which stage(s) are affected? (Select all that apply)\n\nnext build (local)\n\n### Additional context\n\n_No response_","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/81050/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/81050/timeline","performed_via_github_app":null,"state_reason":null,"score":1.0}
